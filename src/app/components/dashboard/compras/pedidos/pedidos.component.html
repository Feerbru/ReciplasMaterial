<div class="container">

    <mat-toolbar class="mat-elevation-z8">
        <span>Registrar Pedido Nuevo</span>
        <div class="example-spacer"></div>
          <button class="pointer" routerLink="/dashboard/compras" mat-icon-button class="example-icon favorite-icon" aria-label="Example icon-button with heart icon">
            <mat-icon>close</mat-icon>
          </button>
    </mat-toolbar>

    <mat-card style="margin-top: 10px;">

        <form [formGroup]="form" (ngSubmit)="agregarPedido()">

            <mat-grid-list cols= "4" rowHeight="70px">

                <mat-grid-tile [colspan]="2" [rowspan]="1" >
                  <mat-form-field class="ancho">
                    <mat-label>Cliente</mat-label>
                    <mat-select formControlName="nombreCliente">
                      <mat-option *ngFor="let client of listCliente" [value]="client">{{client.nombre}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile [colspan]="2" [rowspan]="1">
                  <mat-form-field class="ancho">
                      <mat-label> Descripcion </mat-label>
                      <input matInput autocomplete="off" formControlName="descripcion" >
                    </mat-form-field>
              </mat-grid-tile>

                <mat-grid-tile [colspan]="2" [rowspan]="1" >
                  <mat-form-field class="ancho">
                    <mat-label>Vendedor</mat-label>
                    <mat-select formControlName="nombreUsuario">
                      <mat-option *ngFor="let vend of listVendedor" [value]="vend">{{vend.nombre}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </mat-grid-tile>

                <mat-grid-tile [colspan]="2" [rowspan]="1" >
                  <mat-form-field class="ancho">
                      <mat-label>Fecha de Entrega</mat-label>
                      <input matInput autocomplete="off" formControlName="fechaEntrega" >
                    </mat-form-field>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="2" [rowspan]="1" >
                <mat-form-field class="ancho">
                  <mat-label>Estado</mat-label>
                  <mat-select formControlName="estado">
                    <mat-option *ngFor="let estad of listEstadoPedido" [value]="estad">{{estad.nombre}}</mat-option>
                  </mat-select>
                </mat-form-field>
            </mat-grid-tile>

                <mat-grid-tile [colspan]="2" [rowspan]="1" >
                  <mat-form-field class="ancho">
                    <mat-label>Producto</mat-label>
                    <mat-select formControlName="nombreProducto" >
                      <mat-option>Ninguno</mat-option>
                      <mat-option *ngFor="let producto of listArticulo" [value]="producto">{{producto.nombre}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </mat-grid-tile>

                <mat-grid-tile [colspan]="4" [rowspan]="3" >
                    <table mat-table [dataSource]="transactions" class="mat-elevation-z8">
                        <!-- Item Column -->
                        <ng-container matColumnDef="nombre">
                          <th mat-header-cell *matHeaderCellDef> Producto </th>
                          <td mat-cell *matCellDef="let transaction"> {{transaction.nombre}} </td>
                          <td mat-footer-cell *matFooterCellDef> Total </td>
                        </ng-container>

                        <ng-container matColumnDef="cantidad">
                          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
                          <td mat-cell *matCellDef="let transaction"> {{transaction.cantidad}} </td>
                          <td mat-footer-cell *matFooterCellDef> {{getTotalCant() }} </td>
                        </ng-container>
                      
                        <!-- Cost Column -->
                        <ng-container matColumnDef="precio">
                          <th mat-header-cell *matHeaderCellDef> Precio </th>
                          <td mat-cell *matCellDef="let transaction"> {{transaction.precio | currency}} </td>
                          <td mat-footer-cell *matFooterCellDef> {{getTotalCost() | currency}} </td>
                        </ng-container>
                      
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
                      </table>                 
                 </mat-grid-tile>

                <mat-grid-tile [colspan]="4" [rowspan]="1" >
                    <button type="submit" [disabled]="form.invalid" mat-raised-button color="primary">Aceptar</button>
                </mat-grid-tile>

            </mat-grid-list>
             
        </form>


    </mat-card>
    

</div>
